const btnHamburger=document.querySelector(".btn-nav-hamburger"),btnClose=document.querySelector(".btn-nav-close"),mainNav=document.querySelector(".main-nav"),navLinks=document.querySelector(".nav-links"),logo=document.querySelector(".logo");function toggleMenu(){mainNav.classList.toggle("active"),navLinks.classList.toggle("active"),logo.classList.toggle("active"),document.body.classList.toggle("menu-open")}btnHamburger.addEventListener("click",toggleMenu),btnClose.addEventListener("click",toggleMenu);const statItems=document.querySelectorAll(".stat-item"),duration=3e3;function easeOutCubic(e){return 1-(1-e)**3}function animateCounter(e){const t=parseInt(e.dataset.target),s=performance.now();function n(o){const i=Math.min((o-s)/duration,1),a=easeOutCubic(i);e.textContent=Math.floor(a*t),i<1?requestAnimationFrame(n):e.textContent=t}requestAnimationFrame(n)}const observer=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target;if(!t.classList.contains("visible")){t.classList.add("visible");const e=t.querySelector(".stat-number");e&&animateCounter(e)}}})},{threshold:.5});statItems.forEach(e=>observer.observe(e)),document.addEventListener("DOMContentLoaded",()=>{const i=document.getElementById("contactForm"),t=document.getElementById("name"),n=document.getElementById("email"),s=document.getElementById("phone"),o=document.getElementById("message");function e(e,t){let s=e.parentElement,n=s.querySelector(".error-message");n||(n=document.createElement("span"),n.classList.add("error-message"),n.style.color="red",n.style.fontSize="13px",s.appendChild(n)),n.textContent=t,e.style.borderColor="red"}function a(e){let t=e.parentElement,n=t.querySelector(".error-message");n&&t.removeChild(n),e.style.borderColor="var(--avocado-light)"}function c(e){const t=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;return t.test(e.trim())}function l(e){e=e.trim();const t=/^\+?\d{7,15}$/;return t.test(e)}function r(i){const r=i.value.trim();if(i===t){if(r.length<2)return console.log("fdfs"),e(i,"Imię i nazwisko musi mieć co najmniej 2 znaki."),!1}else if(i===n){if(!c(r))return e(i,"Wprowadź poprawny adres email (np. user@domena.pl)."),!1}else if(i===s){if(!l(r))return e(i,"Wprowadź poprawny numer telefonu (tylko cyfry, ewentualnie + na początku)."),!1}else if(i===o&&r.length<10)return e(i,"Treść wiadomości musi mieć co najmniej 10 znaków."),!1;return a(i),!0}[t,n,s,o].forEach(e=>{e.addEventListener("input",()=>r(e))}),i.addEventListener("submit",c=>{c.preventDefault();let l=!0;if([t,n,s,o].forEach(e=>{r(e)||(l=!1)}),!l)return;const d=new FormData(i);fetch("/php/contact.php",{method:"POST",body:d}).then(e=>e.json()).then(r=>{if(r.status==="success")alert(r.message),i.reset(),[t,n,s,o].forEach(a);else if(r.status==="error"&&r.errors)for(let t in r.errors){const n=document.getElementById(t);e(n,r.errors[t])}else alert(r.message||"Wystąpił błąd.")}).catch(e=>console.error(e))})});const heroBgs=document.querySelectorAll(".parallax-bg");function updateParallax(){const e=window.scrollY;heroBgs.forEach(t=>{const s=t.parentElement.getBoundingClientRect(),n=s.top+window.scrollY;if(e+window.innerHeight>n&&e<n+s.height){const s=e-n;t.style.transform=`translateY(${s*.6}px)`}})}window.addEventListener("load",updateParallax),window.addEventListener("scroll",updateParallax),window.addEventListener("resize",updateParallax);function checkCookieConsent(){const e=localStorage.getItem("cookieConsent");e==="accepted"?document.querySelector(".cookie-banner").style.display="none":e==="rejected"?document.querySelector(".cookie-banner").style.display="none":document.querySelector(".cookie-banner").style.display="flex"}function acceptCookies(){localStorage.setItem("cookieConsent","accepted"),document.querySelector(".cookie-banner").style.display="none"}function rejectCookies(){localStorage.setItem("cookieConsent","rejected"),document.querySelector(".cookie-banner").style.display="none"}window.onload=checkCookieConsent,document.querySelector(".cookie-accept").addEventListener("click",acceptCookies),document.querySelector(".cookie-reject").addEventListener("click",rejectCookies)